"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7539],{7539:(H,v,r)=>{r.r(v),r.d(v,{VaultPageModule:()=>N});var s=r(4881),d=r(6895),p=r(4719),g=r(8694),h=r(7582),u=r(3951),e=r(6738),_=r(9300),f=r(529),m=r(6735),x=r(9734);let b=(()=>{class i{transform(t,l){return t&&l?t.filter(o=>o.vcFilename.toLowerCase().includes(l.toLowerCase())||o.vcUploadedOn.toLowerCase().includes(l.toLowerCase())):t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"searchFilterPipe",type:i,pure:!0}),i})();function y(i,c){1&i&&(e.TgZ(0,"div",28),e._uU(1," No documents found. "),e.qZA())}function T(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"ion-item-sliding",null,31)(3,"ion-item",32),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw(4);return e.KtG(n.viewDocs(a))}),e.TgZ(4,"div",33),e._UZ(5,"img",34),e.qZA(),e.TgZ(6,"div",35)(7,"h2",36),e._uU(8),e.qZA(),e.TgZ(9,"h3",37),e._uU(10),e.qZA()()(),e.TgZ(11,"ion-item-options",38)(12,"ion-button",39),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw(4);return e.KtG(n.shareDoc(a))}),e._UZ(13,"ion-icon",40),e.qZA()()()()}if(2&i){const t=c.$implicit;e.xp6(8),e.Oqu(t.vcFilename),e.xp6(2),e.hij(" uploaded on ",t.vcUploadedOn," ")}}function U(i,c){if(1&i&&(e.YNc(0,T,14,2,"div",29),e.ALo(1,"searchFilterPipe")),2&i){const t=e.oxw().$implicit,l=e.oxw(2);e.Q6J("ngForOf",e.xi3(1,1,l.adminUploadedDocs[t],l.searchText))}}function Z(i,c){if(1&i&&(e.TgZ(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),e._uU(3),e.qZA()(),e.YNc(4,y,2,0,"div",26),e.ALo(5,"searchFilterPipe"),e.YNc(6,U,2,4,"ng-template",null,27,e.W1O),e.qZA()),2&i){const t=c.$implicit,l=e.MAs(7),o=e.oxw(2);e.s9C("value",t),e.xp6(3),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",0===e.xi3(5,4,o.adminUploadedDocs[t],o.searchText).length||!o.adminUploadedDocs[t].length)("ngIfElse",l)}}function F(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"ion-item",15)(4,"ion-label",16),e._UZ(5,"span",17),e.qZA(),e.TgZ(6,"ion-input",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.searchText=o)}),e.qZA()()()(),e.TgZ(7,"div",19)(8,"div",20)(9,"ion-list",21)(10,"div",22)(11,"ion-accordion-group"),e.YNc(12,Z,8,7,"ion-accordion",23),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.searchText),e.xp6(6),e.Q6J("ngForOf",t.getKeys())}}function S(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"ion-item",32),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw(2);return e.KtG(n.viewHandoverDocs(a))}),e.TgZ(2,"div",33),e._UZ(3,"img",34),e.qZA(),e.TgZ(4,"div",35)(5,"h2",36),e._uU(6),e.qZA(),e.TgZ(7,"h3",37),e._uU(8),e.qZA()()()()}if(2&i){const t=c.$implicit;e.xp6(6),e.Oqu(t.vcFilename),e.xp6(2),e.hij(" uploaded on ",t.vcUploadedOn," ")}}function P(i,c){1&i&&(e.TgZ(0,"div",28),e._uU(1," No documents found. "),e.qZA())}function C(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"ion-item",15)(4,"ion-label",16),e._UZ(5,"span",17),e.qZA(),e.TgZ(6,"ion-input",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.searchHandoverText=o)}),e.qZA()()()(),e.TgZ(7,"div",19)(8,"div",20)(9,"ion-list",21),e.YNc(10,S,9,2,"div",41),e.ALo(11,"searchFilterPipe"),e.YNc(12,P,2,0,"div",42),e.ALo(13,"searchFilterPipe"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.searchHandoverText),e.xp6(4),e.Q6J("ngForOf",e.xi3(11,3,t.adminHandoverDocs,t.searchHandoverText)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(13,6,t.adminHandoverDocs,t.searchHandoverText).length||!t.adminHandoverDocs.length)}}function M(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"ion-item",32),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw(2);return e.KtG(n.viewHandoverDocs(a))}),e.TgZ(2,"div",33),e._UZ(3,"img",34),e.qZA(),e.TgZ(4,"div",35)(5,"h2",36),e._uU(6),e.qZA(),e.TgZ(7,"h3",37),e._uU(8),e.qZA()()()()}if(2&i){const t=c.$implicit;e.xp6(6),e.Oqu(t.vcFilename),e.xp6(2),e.hij(" uploaded on ",t.vcUploadedOn," ")}}function D(i,c){1&i&&(e.TgZ(0,"div",28),e._uU(1," No documents found. "),e.qZA())}function A(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"ion-item",15)(4,"ion-label",16),e._UZ(5,"span",17),e.qZA(),e.TgZ(6,"ion-input",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.searchMiscellaneousText=o)}),e.qZA()()()(),e.TgZ(7,"div",19)(8,"div",20)(9,"ion-list",21),e.YNc(10,M,9,2,"div",41),e.ALo(11,"searchFilterPipe"),e.YNc(12,D,2,0,"div",42),e.ALo(13,"searchFilterPipe"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.searchMiscellaneousText),e.xp6(4),e.Q6J("ngForOf",e.xi3(11,3,t.adminMiscellaneousDocs,t.searchMiscellaneousText)),e.xp6(2),e.Q6J("ngIf",0===e.xi3(13,6,t.adminMiscellaneousDocs,t.searchMiscellaneousText).length||!t.adminMiscellaneousDocs.length)}}const V=[{path:"",component:(()=>{class i{constructor(t,l,o,a){this.globalService=t,this.route=l,this.http=o,this.socialShare=a,this.CustomerSegment="documents",this.disableBtn=!0,this.isSwiperOpen=!1,this.max=100,this.current=100,this.searchText="",this.searchHandoverText="",this.searchMiscellaneousText="",this.activeItemSliding=null,this.isSlideOpen=!1,this.adminUploadedDocs=[],this.userUploadedDocs=[]}ngOnInit(){this.vaultBirlaUploads(),this.activeItemSliding=null,this.isSlideOpen=!1}vaultBirlaUploads(){let t=this.globalService.encryptData(this.globalService.customerId),l={vcCustomerID:t,vcType:"",vcStartDate:"",vcEndDate:""};console.log("encryptedCustId",t),this.globalService.vaultBirlaUploads(l).then(o=>{let a=this.globalService.decrypt(this.globalService.encryptSecretKey,l.vcCustomerID);console.log("decrypted val",a),o.btIsSuccess&&o.object?(this.adminUploadedDocs=o.object.subPkgDocumentList.length>0?o.object.subPkgDocumentList:[],this.adminHandoverDocs=o.object.subPkgHandoverDocumentList.length>0?o.object.subPkgHandoverDocumentList:[],this.adminMiscellaneousDocs=o.object.subPkgMiscDocumentList.length>0?o.object.subPkgMiscDocumentList:[],this.adminUploadedDocs.length>0&&(this.adminUploadedDocs=this.adminUploadedDocs.map(n=>(n.vcType=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcType),console.log("Decrypted vcType",n.vcType),n.vcFilename=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcFilename),n.vcFileUrl=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcFileUrl),n)),console.log("Admin Uploaded Docs Before Grouping:",this.adminUploadedDocs),this.adminUploadedDocs=this.groupBy(this.adminUploadedDocs,"vcType"),console.log("Admin Uploaded Docs After Grouping:",this.adminUploadedDocs)),this.adminHandoverDocs.length>0&&this.adminHandoverDocs.map(n=>(n.vcType=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcType),n.vcFilename=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcFilename),n.vcFileUrl=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcFileUrl),n)),this.adminMiscellaneousDocs.length>0&&this.adminMiscellaneousDocs.map(n=>(n.vcType=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcType),n.vcFilename=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcFilename),n.vcFileUrl=this.globalService.decrypt(this.globalService.encryptSecretKey,n.vcFileUrl),n))):(this.adminUploadedDocs=[],this.adminHandoverDocs=[],this.adminMiscellaneousDocs=[])}).catch(o=>{})}getList(t,l){return Object.keys(l)}groupBy(t,l){return t.reduce((o,a)=>{const n=a[l];return o[n]||(o[n]=[]),o[n].push(a),o},{})}getKeys(){return Object.keys(this.adminUploadedDocs)}viewDocs(t){return(0,h.mG)(this,void 0,void 0,function*(){t.vcFileUrl.includes(".pdf")&&(t.fileType="pdf",yield u.A.open({url:t.vcFileUrl})),t.vcFileUrl.includes(".jpg")&&(t.fileType="jpg",t.isDownloaded=!1,this.route.navigate(["/asset-preview"],t)),t.vcFileUrl.includes(".png")&&(t.fileType="png",t.isDownloaded=!1,this.route.navigate(["/asset-preview"],t))})}viewHandoverDocs(t){return(0,h.mG)(this,void 0,void 0,function*(){console.log("docs",t),t.vcFileUrl.includes(".pdf")&&(yield u.A.open({url:t.vcFileUrl})),t.vcFileUrl.includes(".xls")&&(yield u.A.open({url:t.vcFileUrl})),t.vcFileUrl.includes(".doc")&&(yield u.A.open({url:t.vcFileUrl})),(t.vcFileUrl.includes(".jpg")||t.vcFileUrl.includes(".JPG")||t.vcFileUrl.includes(".png")||t.vcFileUrl.includes(".PNG"))&&(t.isDownloaded=!1,this.globalService.previewImage(t.vcFileUrl))})}shareDoc(t){this.globalService.showDownloadToast("Please wait..",null,2e3,"top"),this.globalService.showLoader(),this.socialShare.share(null,null,t.vcFileUrl,null).then(o=>{this.globalService.hideLoader()}).catch(o=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.U),e.Y36(g.F0),e.Y36(f.eN),e.Y36(m.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vault"]],decls:19,vars:10,consts:[[3,"type","typeTitle","pageNameVal"],[1,"lyt-section","tabs","typ-bg-uploads"],["vertical","top","horizontal","end",3,"edge"],["color","light",1,"typ-icon","button-float-button"],[1,"icon-plus"],[1,"content-inner","lyt-upload"],[1,"content","no-padding","app-tab","payment-tabs"],["mode","md",1,"app-tab-nav",3,"scrollable","ngModel","ngModelChange"],["value","documents",1,"app-tab-nav-item"],["value","handoverDocs",1,"app-tab-nav-item"],["value","miscellaneousDocs",1,"app-tab-nav-item"],[1,"tab-content","app-tab-content",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"head"],[1,"search-bar"],["lines","none",1,"app-form-group"],[1,"app-field-label"],[1,"icon","icon-search"],["type","text","placeholder","Search",1,"app-form-control",3,"ngModel","ngModelChange"],[1,"cont"],[1,"document-list"],[1,"card-list"],[1,"bs-doc"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","header","color","transparent",1,"accordion-item"],["class","ion-text-left",4,"ngIf","ngIfElse"],["getRecords",""],[1,"ion-text-left"],["class","bs-doc","slot","content",4,"ngFor","ngForOf"],["slot","content",1,"bs-doc"],["slidingItem",""],["lines","none",1,"iconwithtext",3,"click"],[1,"icon"],["src","../../../assets/images/customer-portal_TDS.svg","alt","customer-portal_TDS"],[1,"text"],[1,"title"],[1,"time-stamp"],["side","end",1,"act-wrap"],[1,"app-btn","btn-icon",3,"click"],["name","share-social-outline"],["class","bs-doc",4,"ngFor","ngForOf"],["class","ion-text-left",4,"ngIf"]],template:function(t,l){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-fab",2)(3,"ion-fab-list")(4,"ion-button",3),e._UZ(5,"i",4),e.qZA()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"ion-segment",7),e.NdJ("ngModelChange",function(a){return l.CustomerSegment=a}),e.TgZ(9,"ion-segment-button",8),e._uU(10," Documents "),e.qZA(),e.TgZ(11,"ion-segment-button",9),e._uU(12," Handover Documents "),e.qZA(),e.TgZ(13,"ion-segment-button",10),e._uU(14," Miscellaneous Documents "),e.qZA()(),e.TgZ(15,"div",11),e.YNc(16,F,13,2,"div",12),e.YNc(17,C,14,9,"div",12),e.YNc(18,A,14,9,"div",12),e.qZA()()()()),2&t&&(e.Q6J("type","menu")("typeTitle","pageName")("pageNameVal","Vault"),e.xp6(2),e.Q6J("edge",!0),e.xp6(6),e.Q6J("scrollable",!0)("ngModel",l.CustomerSegment),e.xp6(7),e.Q6J("ngSwitch",l.CustomerSegment),e.xp6(1),e.Q6J("ngSwitchCase","documents"),e.xp6(1),e.Q6J("ngSwitchCase","handoverDocs"),e.xp6(1),e.Q6J("ngSwitchCase","miscellaneousDocs"))},dependencies:[s.We,s.eh,s.YG,s.W2,s.IJ,s.zq,s.gu,s.pK,s.Ie,s.IK,s.td,s.Q$,s.q_,s.cJ,s.GO,s.QI,s.j9,d.sg,d.O5,d.RF,d.n9,p.JJ,p.On,x.G,b],styles:[".card-list[_ngcontent-%COMP%]{padding-left:4px;padding-right:4px}.payment-tabs[_ngcontent-%COMP%]{display:block!important}.accordion-item[_ngcontent-%COMP%]{margin-bottom:12px;padding:6px 12px;background:#f6f6f6;border-radius:4px}.accordion-item[slot=header][_ngcontent-%COMP%]   .ion-accordion-toggle-icon[_ngcontent-%COMP%]{margin:0}.accordion-item[_ngcontent-%COMP%]::part(native){border:none;padding-left:0}"]}),i})()}];let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(V),g.Bz]}),i})();var J=r(754),O=r(9365);let N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[m.e],imports:[s.Pc,d.ez,p.u5,w,J.U,O.D,p.UX]}),i})()}}]);